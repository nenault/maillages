(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,a){e.exports=a(67)},59:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(34),r=a.n(l),o=a(1),s=a(2),i=a(3),u=a(5),m=a(4),p=a(35),d=a.n(p).a.create({baseURL:"https://maillages.herokuapp.com",withCredentials:!0});function h(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var f=function(e){return d.post("/api/auth/signup",e).then((function(e){return e.data})).catch(h)},E=function(e){return d.post("/api/auth/signin",e).then((function(e){return e.data})).catch(h)},v=function(){return d.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(h)},b=function(){return d.get("/api/auth/logout").then((function(e){return e.data})).catch(h)},g=function(e){return d.get(e)},y=function(e,t){return d.get(e+t)},C=function(e,t){return d.post(e,t)},N=function(e,t){return d.patch(e,t)},O=function(e,t){return d.delete(e+t)},j=c.a.createContext(),S=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={user:null,isLoggedIn:!1,isLoading:!0,isMob:!1},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0,isMob:t.isMob})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1,isMob:!1})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1,isMob:t.isMob})})).catch((function(t){e.setState({user:null,isLoggedIn:!1,isLoading:!1,isMob:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading,isMob:this.state.isMob};return c.a.createElement(j.Provider,{value:e},this.props.children)}}]),a}(n.Component),k=a(6),x=function(e){return function(t){return c.a.createElement(j.Consumer,null,(function(a){return c.a.createElement(e,Object.assign({},t,{context:a}))}))}},D=(a(59),x((function(e){var t=e.context;return c.a.createElement("nav",{className:"NavMain"},c.a.createElement(o.c,{exact:!0,to:"/"},c.a.createElement("img",{className:"logo-nav",src:"https://res.cloudinary.com/ddwcgukvk/image/upload/v1606295343/websitearecurso-19_b9ra6h.png",alt:"logo"})),c.a.createElement("ul",{className:"nav-list"},t.isMob&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement(o.c,{to:"/contacts"},c.a.createElement("h4",{style:{color:"#196c84"}},"Contacts"))),c.a.createElement("li",null,c.a.createElement(o.c,{to:"/users"},c.a.createElement("h4",{style:{color:"#196c84"}},"B\xe9n\xe9voles"))),c.a.createElement("li",null,c.a.createElement(o.c,{to:"/institutions"},c.a.createElement("h4",{style:{color:"#196c84"}},"Etablissements")))),t.isLoggedIn&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement("h4",{style:{color:"#e36164"},onClick:function(){b().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))}},"Me d\xe9connecter")))))}))),M=a(9),A=a(15),_=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={search:""},e.handleChange=function(t){var a=t.target.value;e.setState({search:a}),e.props.handleSearch({search:t.target.value})},e}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"search-bar"},c.a.createElement("form",{className:"Form"},c.a.createElement("input",{id:"search",autoComplete:"off",className:"search",type:"text",name:"search",placeholder:"Chercher un ".concat(this.props.type),value:this.state.search,onChange:this.handleChange})))}}]),a}(n.Component),w=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={mycontacts:[]},e.getContacts=function(t){var a,n=[],c=Object(M.a)(t.entries());try{for(c.s();!(a=c.n()).done;){var l=Object(A.a)(a.value,2),r=(l[0],l[1]);y("/api/contacts/",r.contact).then((function(t){n.push(t.data),e.setState({mycontacts:n})})).catch((function(e){console.log(e)}))}}catch(o){c.e(o)}finally{c.f()}},e.search=function(e){return null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;y("/api/users/",this.context.user._id).then((function(t){e.getContacts(t.data.contacts)})).catch((function(e){console.log(e)}))}},{key:"formatDate",value:function(e){var t=e.split("T")[0].split("-");return"".concat(t[2],"-").concat(t[1],"-").concat(t[0])}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"contacts-mycontacts"},c.a.createElement("h3",{style:{marginBottom:"10px",color:"#e36164"}},"Mes contacts"),c.a.createElement(_,{handleSearch:this.search,type:"contact"}),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Nom"),c.a.createElement("th",{scope:"col"},"Dernier appel"),c.a.createElement("th",{scope:"col"},"Fr\xe9quence d'appel"))),c.a.createElement("tbody",null,this.state.mycontacts.map((function(t){return c.a.createElement("tr",{key:t._id},c.a.createElement("td",{scope:"row","data-label":"Nom"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.name)),c.a.createElement("td",{"data-label":"Dernier Appel"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.lastcall?e.formatDate(t.lastcall):"never")),c.a.createElement("td",{"data-label":"Fr\xe9quence d'appel"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.frequency)))})))))}}]),a}(n.Component);w.contextType=j;var L=w,I=a(8),T=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={contacts:[],searchContacts:[]},e.search=function(t){var a=Object(I.a)(e.state.contacts).filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}));e.setState({searchContacts:a})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g("/api/contacts").then((function(t){e.getNeedCallContacts(t.data),e.isCallNeeded()})).catch((function(e){console.log(e)}))}},{key:"isCallNeeded",value:function(){var e,t=this,a=Object(M.a)(this.state.contacts.entries());try{for(a.s();!(e=a.n()).done;){var n=Object(A.a)(e.value,2),c=(n[0],n[1]);if(c.lastcall){var l=new Date(c.lastcall),r=new Date,o=l.getTime()-r.getTime(),s=Math.ceil(o/864e5);("Chaque jour"===c.frequency&&-1===s||"2 fois par semaine"===c.frequency&&-3===s||"1 fois par semaine"===c.frequency&&-7===s)&&N("/api/contacts/"+c._id,{needcall:!0}).then((function(e){return g("/api/contacts").then((function(e){t.getNeedCallContacts(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){return console.log(e)}))}}}catch(i){a.e(i)}finally{a.f()}}},{key:"getNeedCallContacts",value:function(e){var t=e.filter((function(e){return!0===e.needcall&&!0===e.isActive&&"eMail"!=e.type}));this.setState({contacts:t,searchContacts:t})}},{key:"formatDate",value:function(e){var t=e.split("T")[0].split("-");return"".concat(t[2],"-").concat(t[1],"-").concat(t[0])}},{key:"render",value:function(){var e=this;return this.state.contacts?c.a.createElement("div",{className:"contacts-needcall"},c.a.createElement("h3",{style:{marginBottom:"10px",color:"#e36164"}},this.state.searchContacts.length," contact",this.state.searchContacts.length>1?"s":""," attend",this.state.searchContacts.length>1?"ent":""," nos appels"),c.a.createElement(_,{handleSearch:this.search,type:"contact"}),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Nom"),c.a.createElement("th",{scope:"col"},"Dernier Appel"),c.a.createElement("th",{scope:"col"},"Fr\xe9quence d'appel"))),c.a.createElement("tbody",null,this.state.searchContacts.map((function(t){return c.a.createElement("tr",{key:t._id},c.a.createElement("td",{scope:"row","data-label":"Nom"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.name)),c.a.createElement("td",{"data-label":"Dernier Appel"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.lastcall?e.formatDate(t.lastcall):"never")),c.a.createElement("td",{"data-label":"Fr\xe9quence d'appel"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.frequency)))}))))):c.a.createElement("div",null,"Loading")}}]),a}(n.Component),F=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={contacts:[],searchContacts:[]},e.search=function(t){var a=Object(I.a)(e.state.contacts).filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}));e.setState({searchContacts:a})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g("/api/contacts").then((function(t){e.getNeedWriteContacts(t.data),e.isCallNeeded()})).catch((function(e){console.log(e)}))}},{key:"isCallNeeded",value:function(){var e,t=this,a=Object(M.a)(this.state.contacts.entries());try{for(a.s();!(e=a.n()).done;){var n=Object(A.a)(e.value,2),c=(n[0],n[1]);if(c.lastcall){var l=new Date(c.lastcall),r=new Date,o=l.getTime()-r.getTime(),s=Math.ceil(o/864e5);("Chaque jour"===c.frequency&&-1===s||"2 fois par semaine"===c.frequency&&-3===s||"1 fois par semaine"===c.frequency&&-7===s)&&N("/api/contacts/"+c._id,{needcall:!0}).then((function(e){return g("/api/contacts").then((function(e){t.getNeedWriteContacts(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){return console.log(e)}))}}}catch(i){a.e(i)}finally{a.f()}}},{key:"getNeedWriteContacts",value:function(e){var t=e.filter((function(e){return"eMail"===e.type&&!0===e.isActive}));this.setState({contacts:t,searchContacts:t})}},{key:"formatDate",value:function(e){var t=e.split("T")[0].split("-");return"".concat(t[2],"-").concat(t[1],"-").concat(t[0])}},{key:"render",value:function(){var e=this;return this.state.contacts?c.a.createElement("div",{className:"contacts-needwrite"},c.a.createElement("h3",{style:{marginBottom:"10px",color:"#e36164"}},this.state.searchContacts.length," contact",this.state.searchContacts.length>1?"s":""," attend",this.state.searchContacts.length>1?"ent":""," nos mails"),c.a.createElement(_,{handleSearch:this.search,type:"contact"}),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Nom"),c.a.createElement("th",{scope:"col"},"Dernier",c.a.createElement("br",null),"mail"))),c.a.createElement("tbody",null,this.state.searchContacts.map((function(t){return c.a.createElement("tr",{key:t._id},c.a.createElement("td",{scope:"row","data-label":"Nom"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.name)),c.a.createElement("td",{"data-label":"Dernier mail"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")}," ",t.lastcall?e.formatDate(t.lastcall):"never")))}))))):c.a.createElement("div",null,"Loading")}}]),a}(n.Component),q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={contacts:[]},e.setInstitution=function(){var t,a=Object(M.a)(e.state.contacts);try{var n=function(){var e=t.value;e.institution_code&&!e.institution&&g("/api/institutions/").then((function(t){var a=t.data.filter((function(t){return t.code.includes(e.institution_code)}));N("/api/contacts/"+e._id,{institution:a[0]._id}).then((function(e){})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e)}))};for(a.s();!(t=a.n()).done;)n()}catch(c){a.e(c)}finally{a.f()}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g("/api/contacts").then((function(t){e.setState({contacts:t.data}),e.setInstitution()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"home page"},c.a.createElement("div",{className:"contacts-home"},this.context.user&&this.context.user.contacts.length>0?c.a.createElement(L,null):"",c.a.createElement(T,null),c.a.createElement(F,null)))}}]),a}(n.Component);q.contextType=j;var U=q,V=a(11),H=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:""},e.handleChange=function(t){var a=t.target.name,n="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value;e.setState(Object(V.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault(),E(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement("form",{className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},c.a.createElement("img",{className:"logo-form",src:"https://s3-eu-west-1.amazonaws.com/makesense.org/uploads/20200827171359/vRecurso-16-8.png",alt:"logo_reaction"}),c.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),c.a.createElement("input",{className:"input",type:"email",id:"email",name:"email"}),c.a.createElement("label",{className:"label",htmlFor:"password"},"Mot de passe"),c.a.createElement("input",{className:"input",type:"password",id:"password",name:"password"}),c.a.createElement("button",{style:{marginTop:"50px"},className:"btn red"},"Je me connecte"),c.a.createElement(o.b,{to:"/signup",className:"register"},"Ou je m'inscris")))}}]),a}(n.Component);H.contextType=j;var B=Object(k.g)(H),R=function(e){return c.a.createElement(B,null)},G=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:""},e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value,n=t.target.name;e.setState(Object(V.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),f(e.state).then((function(t){e.context.setUser(t),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement("form",{className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},c.a.createElement("img",{className:"logo-form",src:"https://s3-eu-west-1.amazonaws.com/makesense.org/uploads/20200827171359/vRecurso-16-8.png",alt:"logo_reaction"}),c.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),c.a.createElement("input",{className:"input",type:"email",id:"email",name:"email"}),c.a.createElement("label",{className:"label",htmlFor:"password"},"Mot de passe"),c.a.createElement("input",{className:"input",type:"password",id:"password",name:"password"}),c.a.createElement("button",{style:{marginTop:"50px"},className:"btn red"},"Je m'inscris"),c.a.createElement(o.b,{to:"/signin",className:"register"},"Ou je me connecte")))}}]),a}(n.Component);G.contextType=j;var P=Object(k.g)(G),z=function(e){return c.a.createElement(P,null)},J=a(20),$=x((function(e){var t=e.component,a=e.context,n=Object(J.a)(e,["component","context"]);return a.isLoading?null:a.isLoggedIn?c.a.createElement(k.b,Object.assign({},n,{render:function(e){return c.a.createElement(t,e)}})):c.a.createElement(k.a,{to:"/signin"})})),Y=x((function(e){var t=e.component,a=e.context,n=Object(J.a)(e,["component","context"]);return a.isLoading?null:a.isMob?c.a.createElement(k.b,Object.assign({},n,{render:function(e){return c.a.createElement(t,e)}})):c.a.createElement(k.a,{to:"/signin"})})),W=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null)}}]),a}(n.Component),K=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={contacts:[],searchContacts:[]},e.search=function(t){var a=Object(I.a)(e.state.contacts).filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}));e.setState({searchContacts:a})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g("/api/contacts").then((function(t){e.setState({contacts:t.data,searchContacts:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.isUpdating!==e.isUpdating&&g("/api/contacts").then((function(e){t.setState({contacts:e.data,searchContacts:e.data}),t.props.stopUpdating()})).catch((function(e){console.log(e)}))}},{key:"deleteOne",value:function(e){var t=this;O("/api/contacts/",e).then((function(e){return t.componentDidMount()})).catch((function(e){return console.log(e)}))}},{key:"disableOne",value:function(e){var t=this;N("/api/contacts/"+e,{isActive:!1}).then((function(e){g("/api/contacts").then((function(e){t.setState({contacts:e.data,searchContacts:e.data}),t.props.updating()})).catch((function(e){console.log(e)}))})).catch((function(e){return console.log(e)}))}},{key:"formatDate",value:function(e){var t=e.split("T")[0].split("-");return"".concat(t[2],"-").concat(t[1],"-").concat(t[0])}},{key:"render",value:function(){var e=this;if(!this.state.contacts)return c.a.createElement("div",null,"Loading");var t=this.state.searchContacts.filter((function(e){return!0===e.isActive}));return c.a.createElement("div",{className:"contacts-active"},c.a.createElement("h3",{style:{marginBottom:"10px",color:"#e36164"}},t.length," contact",t.length>1?"s":""," actif",t.length>1?"s":""),c.a.createElement(_,{handleSearch:this.search,type:"contact"}),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Nom"),c.a.createElement("th",{scope:"col"},"Dernier appel"),c.a.createElement("th",{scope:"col"},"Editer"),c.a.createElement("th",{scope:"col"},"D\xe9sactiver"),c.a.createElement("th",{scope:"col"},"Supprimer"))),c.a.createElement("tbody",null,t.map((function(t){return c.a.createElement("tr",{key:t._id},c.a.createElement("td",{scope:"row","data-label":"Nom"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.name)),c.a.createElement("td",{"data-label":"Dernier appel"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.lastcall?e.formatDate(t.lastcall):"never")),c.a.createElement("td",{"data-label":"Editer"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/edit")},c.a.createElement("i",{className:"fas fa-edit"}))),c.a.createElement("td",{"data-label":"D\xe9sactiver"},c.a.createElement(o.b,{to:e.props,onClick:function(){return e.disableOne(t._id)}},c.a.createElement("i",{className:"fas fa-user-times"}))),c.a.createElement("td",{"data-label":"Supprimer"},c.a.createElement(o.b,{to:e.props,onClick:function(){return e.deleteOne(t._id)}},c.a.createElement("i",{className:"fas fa-backspace"}))))})))))}}]),a}(n.Component),Q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={contacts:[],searchContacts:[]},e.search=function(t){var a=Object(I.a)(e.state.contacts).filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}));e.setState({searchContacts:a})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g("/api/contacts").then((function(t){e.setState({contacts:t.data,searchContacts:t.data})})).catch((function(e){console.log(e)}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.isUpdating!==e.isUpdating&&g("/api/contacts").then((function(e){t.setState({contacts:e.data,searchContacts:e.data}),t.props.stopUpdating()})).catch((function(e){console.log(e)}))}},{key:"deleteOne",value:function(e){var t=this;O("/api/contacts/",e).then((function(e){return t.componentDidMount()})).catch((function(e){return console.log(e)}))}},{key:"activeOne",value:function(e){var t=this;N("/api/contacts/"+e,{isActive:!0}).then((function(e){g("/api/contacts").then((function(e){t.setState({contacts:e.data}),t.props.updating()})).catch((function(e){console.log(e)}))})).catch((function(e){return console.log(e)}))}},{key:"formatDate",value:function(e){var t=e.split("T")[0].split("-");return"".concat(t[2],"-").concat(t[1],"-").concat(t[0])}},{key:"render",value:function(){var e=this;if(!this.state.contacts)return c.a.createElement("div",null,"Loading");var t=this.state.searchContacts.filter((function(e){return!1===e.isActive}));return c.a.createElement("div",{className:"contacts-inactive"},c.a.createElement("h3",{style:{marginBottom:"10px",color:"#e36164"}},t.length," contact",t.length>1?"s":""," inactif",t.length>1?"s":""),c.a.createElement(_,{handleSearch:this.search,type:"contact"}),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Nom"),c.a.createElement("th",{scope:"col"},"Dernier appel"),c.a.createElement("th",{scope:"col"},"Editer"),c.a.createElement("th",{scope:"col"},"Activer"),c.a.createElement("th",{scope:"col"},"Supprimer"))),c.a.createElement("tbody",null,t.map((function(t){return c.a.createElement("tr",{key:t._id},c.a.createElement("td",{scope:"row","data-label":"Nom"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.name)),c.a.createElement("td",{"data-label":"Dernier appel"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/")},t.lastcall?e.formatDate(t.lastcall):"never")),c.a.createElement("td",{"data-label":"Editer"},c.a.createElement(o.b,{to:"/contacts/".concat(t._id,"/edit")},c.a.createElement("i",{className:"fas fa-edit"}))),c.a.createElement("td",{"data-label":"R\xe9activer"},c.a.createElement(o.b,{to:e.props,onClick:function(){return e.activeOne(t._id)}},c.a.createElement("i",{className:"fas fa-user-plus"}))),c.a.createElement("td",{"data-label":"Supprimer"},c.a.createElement(o.b,{to:e.props,onClick:function(){return e.deleteOne(t._id)}},c.a.createElement("i",{className:"fas fa-backspace"}))))})))))}}]),a}(n.Component),X=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={isUpdating:!1},e.updating=function(t){e.setState({isUpdating:!0})},e.stopUpdating=function(t){e.setState({isUpdating:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"page"},c.a.createElement("h1",null,"Les contacts"),c.a.createElement(o.b,{style:{marginBottom:"10px"},className:"btn red",to:"/contacts/create"},"Ajouter un contact"),c.a.createElement("div",{className:"contacts-admin"},c.a.createElement(K,{isUpdating:this.state.isUpdating,updating:this.updating,stopUpdating:this.stopUpdating}),c.a.createElement(Q,{isUpdating:this.state.isUpdating,updating:this.updating,stopUpdating:this.stopUpdating})))}}]),a}(n.Component),Z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={name:"",contact:"",comment:"",frequency:"",type:"",creator:"",institution_code:""},e.handleChange=function(t){var a,n=t.target.name,c=t.target.value;e.setState((a={},Object(V.a)(a,n,c),Object(V.a)(a,"creator",e.context.user._id),a))},e.handleSubmit=function(t){t.preventDefault(),"edit"===e.props.action?e.updateItem():e.createItem()},e.updateItem=function(){N("/api/contacts/"+e.props.id,e.state).then((function(t){e.props.history.push("/contacts")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;"edit"===this.props.action&&y("/api/contacts/",this.props.id).then((function(t){var a=t.data;e.setState({name:a.name,contact:a.contact,comment:a.comment,type:a.type,frequency:a.frequency,institution_code:a.institution_code})})).catch((function(e){console.log(e)}))}},{key:"createItem",value:function(){var e=this;C("/api/contacts",this.state).then((function(t){e.props.history.push("/contacts")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"ItemForm-container"},c.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},c.a.createElement("h2",{className:"title"},"edit"===this.props.action?"Modifier":"Ajouter"," un contact"),c.a.createElement("div",{className:"form-groups"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"name"},"Pr\xe9nom / Nom :\xa0"),c.a.createElement("input",{id:"name",className:"input",type:"text",name:"name",value:this.state.name,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"contact"},"Num\xe9ro ou mail :\xa0"),c.a.createElement("input",{id:"contact",className:"input",type:"text",name:"contact",value:this.state.contact,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"comment"},"Commentaires :\xa0"),c.a.createElement("textarea",{id:"comment",className:"input",type:"text",name:"comment",rows:"8",value:this.state.comment,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"institution_code"},"Code de l'\xe9tablissement :\xa0"),c.a.createElement("input",{id:"institution_code",className:"input",type:"text",name:"institution_code",value:this.state.institution_code,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"type"},"Contacter par :\xa0"),c.a.createElement("select",{id:"type",value:this.state.type,name:"type",onChange:this.handleChange},c.a.createElement("option",{value:"appel"},"T\xe9l\xe9phone"),c.a.createElement("option",{value:"eMail"},"Email"))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"frequency"},"Fr\xe9quence de contact :\xa0"),c.a.createElement("select",{id:"frequency",value:this.state.frequency,name:"frequency",onChange:this.handleChange},c.a.createElement("option",{value:"-1",disabled:!0},"Select a frequency"),c.a.createElement("option",{value:"Chaque jour"},"Chaque jour"),c.a.createElement("option",{value:"1 fois par semaine"},"1 fois par semaine"),c.a.createElement("option",{value:"2 fois par semaine"},"2 fois par semaine"),c.a.createElement("option",{value:"email : pas de limitation"},"email : pas de limitation"),c.a.createElement("option",{value:"Ne souhaite plus \xeatre appel\xe9"},"Ne souhaite plus \xeatre appel\xe9")))),c.a.createElement("button",{style:{marginTop:"40px"},className:"btn red"},"edit"===this.props.action?"Modifier":"Ajouter"))))}}]),a}(n.Component);Z.contextType=j;var ee=Object(k.g)(Z);var te=function(){return c.a.createElement("div",null,c.a.createElement(ee,null))},ae=function(e){return c.a.createElement("div",null,c.a.createElement(ee,{action:"edit",id:e.match.params.id}))},ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={comment:"",last:"",contact:e.props.contact,creator:"",creatorId:""},e.handleChange=function(t){var a,n=t.target.name,c=t.target.value;e.setState((a={},Object(V.a)(a,n,c),Object(V.a)(a,"creator",e.context.user.email),Object(V.a)(a,"creatorId",e.context.user._id),a))},e.handleSubmit=function(t){t.preventDefault(),"edit"===e.props.action?e.updateCall():e.createCall()},e.updateCall=function(){N("/api/calls/"+e.props.id,e.state).then((function(t){e.props.handleCall(t.data)})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;"edit"===this.props.action&&y("/api/calls/",this.props.id).then((function(t){var a=t.data;e.setState({comment:a.comment,last:a.last,creator:a.creator,creatorId:a.creatorId})})).catch((function(e){console.log(e)}))}},{key:"createCall",value:function(){var e=this;C("/api/calls",this.state).then((function(t){e.props.handleCall(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"ItemForm-container"},c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("div",null,c.a.createElement("label",{className:"label",htmlFor:"comment"},"Compte rendu de l'appel"),c.a.createElement("br",null),c.a.createElement("textarea",{className:"compte-rendu",id:"comment",type:"text",name:"comment",rows:"8",value:this.state.comment,onChange:this.handleChange})),c.a.createElement("div",null,c.a.createElement("label",{className:"label",htmlFor:"last"},"Dur\xe9e de l'appel"),c.a.createElement("br",null),c.a.createElement("input",{style:{padding:"8px"},id:"last",type:"text",name:"last",value:this.state.last,onChange:this.handleChange})),c.a.createElement("button",{className:"btn small",style:{marginTop:"10px"}},"Valider"))))}}]),a}(n.Component);ne.contextType=j;var ce=ne,le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).addCall=function(t){e.props.handleCall({call:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"create-call"},c.a.createElement(ce,{handleCall:this.addCall,contact:this.props.contact}))}}]),a}(n.Component),re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).addCall=function(t){e.props.handleCall({call:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(ce,{action:"edit",id:this.props.id,handleCall:this.addCall,contact:this.props.contact}))}}]),a}(n.Component),oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={contact:null,addCall:"",calls:[],isCall:"",lastcall:"",volunteers:[],add:"",histo:[],institution:{}},e.buildInstitution=function(t){y("/api/institutions/",t).then((function(t){e.setState({institution:t.data})})).catch((function(e){console.log(e)}))},e.buildCalls=function(t){var a,n=Object(M.a)(t.entries());try{var c=function(){var t=Object(A.a)(a.value,2),n=(t[0],t[1]);y("/api/calls/",n.call).then((function(t){var a=Object(I.a)(e.state.calls);a.unshift(t.data),e.setState({calls:a}),y("/api/calls/",n.call).then((function(e){})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))};for(n.s();!(a=n.n()).done;)c()}catch(l){n.e(l)}finally{n.f()}},e.addCallid=function(t){e.setState({lastcall:Date.now()}),N("/api/contacts/"+e.props.match.params.id,{needcall:!1,lastcall:e.state.lastcall,$push:{calls:{call:t.call._id}}}).then((function(t){return y("/api/contacts/",e.props.match.params.id).then((function(t){e.setState({addCall:"",calls:[],contact:t.data}),e.buildCalls(t.data.calls)})).catch((function(e){console.log(e)}))})).catch((function(e){return console.log(e)}))},e.updateCallId=function(t){e.setState({calls:"",addCall:""}),y("/api/contacts/",e.props.match.params.id).then((function(t){e.buildCalls(t.data.calls)})).catch((function(e){console.log(e)}))},e.addCall=function(t){e.setState({addCall:c.a.createElement(le,{handleCall:e.addCallid,contact:e.props.match.params.id})})},e.updateCall=function(t){e.setState({addCall:c.a.createElement(re,{id:t,handleCall:e.updateCallId,contact:e.props.match.params.id})})},e.addVolunteer=function(t){N("/api/contacts/"+e.props.match.params.id,{$push:{volunteers:{volunteer:e.context.user._id}}}).then((function(t){return N("/api/users/"+e.context.user._id,{$push:{contacts:{contact:e.props.match.params.id}}}).then((function(t){y("/api/contacts/",e.props.match.params.id).then((function(t){e.setState({contact:t.data}),e.getVolunteer(t.data.volunteers)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){return console.log(e)}))},e.getVolunteer=function(t){var a=[];e.setState({volunteers:[]});var n,c=Object(M.a)(t.entries());try{for(c.s();!(n=c.n()).done;){var l=Object(A.a)(n.value,2),r=(l[0],l[1]);y("/api/users/",r.volunteer).then((function(t){a.push(t.data.email),e.setState({volunteers:a})})).catch((function(e){console.log(e)}))}}catch(o){c.e(o)}finally{c.f()}},e.removeVolunteer=function(t){N("/api/contacts/"+e.props.match.params.id,{$pull:{volunteers:{volunteer:e.context.user._id}}}).then((function(t){e.setState({contact:t.data}),e.getVolunteer(t.data.volunteers),N("/api/users/"+e.context.user._id,{$pull:{contacts:{contact:e.props.match.params.id}}}).then((function(e){})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;y("/api/contacts/",this.props.match.params.id).then((function(t){e.setState({contact:t.data}),e.buildCalls(t.data.calls),t.data.institution&&e.buildInstitution(t.data.institution),t.data.histo&&e.formatHisto(t.data.histo),t.data.volunteers&&e.getVolunteer(t.data.volunteers)})).catch((function(e){console.log(e)}))}},{key:"formatDate",value:function(e){var t=e.split("T")[0].split("-");return"".concat(t[2],"/").concat(t[1],"/").concat(t[0])}},{key:"formatHisto",value:function(e){var t,a=[],n=Object(M.a)(e.split("***"));try{for(n.s();!(t=n.n()).done;){var c=t.value;a.unshift([c.split("[")])}}catch(l){n.e(l)}finally{n.f()}this.setState({histo:a})}},{key:"render",value:function(){var e=this;return this.state.contact?c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"contact"},c.a.createElement("div",{className:"contact-info"},c.a.createElement("div",{className:"contact-bio"},c.a.createElement("h2",null,this.state.contact.name),c.a.createElement("h4",null,c.a.createElement("i",{className:"fas fa-phone"})," /"," ",c.a.createElement("i",{className:"fas fa-envelope"})," :"," ",this.state.contact.contact),c.a.createElement("div",{className:"contact-institution"},c.a.createElement("p",null,this.state.institution.name),c.a.createElement("p",null,this.state.institution.postal_code,"\xa0",this.state.institution.city," ",this.state.institution.departement))),c.a.createElement("div",{className:"contact-details"},c.a.createElement("h4",null,"Fr\xe9quence de contact : ",this.state.contact.frequency),this.state.contact.comment?c.a.createElement("p",null,this.state.contact.comment):"",c.a.createElement("ul",null,this.state.contact.volunteer_1||this.state.contact.volunteer_2||this.state.volunteers.length>0?c.a.createElement("h4",{style:{marginTop:"10px"}},"B\xe9n\xe9vole(s)"):c.a.createElement("p",{style:{marginTop:"10px"}},"Il n'y a aucun\xb7e b\xe9n\xe9vole en contact r\xe9gulier avec"," ",this.state.contact.name),c.a.createElement("li",null,this.state.contact.volunteer_1?c.a.createElement(c.a.Fragment,null," ",c.a.createElement("i",{style:{marginRight:"8px"},className:"fas fa-user"}),this.state.contact.volunteer_1):""),c.a.createElement("li",null,this.state.contact.volunteer_2?c.a.createElement(c.a.Fragment,null," ",c.a.createElement("i",{style:{marginRight:"8px"},className:"fas fa-user"}),this.state.contact.volunteer_2):""),this.state.volunteers.map((function(t){return c.a.createElement("li",{key:t},c.a.createElement("i",{style:{marginRight:"8px"},className:"fas fa-user"})," ",t.split("@")[0]," ",t===e.context.user.email?c.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.removeVolunteer()}},"(me d\xe9sabonner)"):"")}))),this.state.volunteers.includes(this.context.user.email)?"":c.a.createElement("span",{style:{marginTop:"10px"},className:"btn small",onClick:function(){return e.addVolunteer()}},"S'abonner"))),c.a.createElement("div",{className:"contact-histo"},c.a.createElement("h3",{className:"date-call",style:{marginBottom:"10px"}},"Dernier appel :"," ",this.state.contact.lastcall?this.formatDate(this.state.contact.lastcall):"aucun appel n'a encore \xe9t\xe9 pass\xe9"),c.a.createElement("span",{className:"btn red",onClick:function(){return e.addCall()}}," ","Ajouter un appel"),c.a.createElement("div",null,this.state.addCall),c.a.createElement("h3",{style:{marginTop:"10px"}},"Historique des appels"),c.a.createElement("div",{className:"histo-lists"},this.state.calls&&this.state.calls.map((function(t){return c.a.createElement("div",{style:{marginBottom:"20px"},key:t._id},c.a.createElement("h4",null,e.formatDate(t.created)),c.a.createElement("div",null,"B\xe9n\xe9vole : ",t.creator.split("@")[0]),c.a.createElement("div",null,"Dur\xe9e : ",t.last),c.a.createElement("div",null,"Commentaire : ",t.comment),c.a.createElement("div",null," ",t.creator===e.context.user.email||!0===e.context.user.isMob?c.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.updateCall(t._id)}},"Editer ",c.a.createElement("i",{className:"far fa-edit"})):""))})),this.state.histo.map((function(e){return c.a.createElement("div",{className:"histo-box",key:e},e.map((function(e){return c.a.createElement("div",{key:e},c.a.createElement("h4",null,e[0]),c.a.createElement("p",null,e[1]),c.a.createElement("p",null,e[2]),c.a.createElement("p",null,e[3]),c.a.createElement("p",null,e[4]),c.a.createElement("p",null,e[5]))})),c.a.createElement("br",null))})))))):c.a.createElement("div",null,"Loading")}}]),a}(n.Component);oe.contextType=j;var se=Object(k.g)(oe),ie=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={institutions:[],searchInstitutions:[],departement:"Ain"},e.handleChange=function(t){var a=t.target.value;e.setState({departement:a})},e.search=function(t){var a=Object(I.a)(e.state.institutions).filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}));e.setState({searchInstitutions:a})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g("/api/institutions").then((function(t){e.setState({institutions:t.data,searchInstitutions:t.data})})).catch((function(e){console.log(e)}))}},{key:"deleteOne",value:function(e){var t=this;O("/api/institutions/",e).then((function(e){return t.componentDidMount()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;if(!this.state.institutions)return c.a.createElement("div",null,"Loading");var t=this.state.searchInstitutions.filter((function(t){return t.departement===e.state.departement}));return c.a.createElement("div",{className:"page institutions"},c.a.createElement("h1",null,"Les \xe9tablissements"),c.a.createElement(o.b,{style:{marginBottom:"40px"},className:"btn red",to:"/institutions/create"},"Ajouter un \xe9tablissement"),c.a.createElement("div",{style:{marginBottom:"20px"}},c.a.createElement("label",{className:"label",htmlFor:"departement"},"D\xe9partement :\xa0"),c.a.createElement("select",{id:"departement",defautvalue:"Ain",name:"departement",onChange:this.handleChange},["Ain","Aisne","Allier","Alpes-de-Haute-Provence","Hautes-Alpes","Alpes-Maritimes","Ard\xe8che","Ardennes","Ari\xe8ge","Aube","Aude","Aveyron","Bouches-du-Rh\xf4ne","Calvados","Cantal","Charente","Charente-Maritime","Cher","Corr\xe8ze","Corse","C\xf4te-d'Or","C\xf4tes-d'Armor","Creuse","Dordogne","Gironde","Doubs","Dr\xf4me","Eure","Eure-et-Loir","Finist\xe8re","Gard","Haute-Garonne","Gers","H\xe9rault","Ille-et-Vilaine","Indre","Indre-et-Loire","Is\xe8re","Jura","Landes","Loir-et-Cher","Loire","Haute-Loire","Loire-Atlantique","Loiret","Lot","Lot-et-Garonne","Loz\xe8re","Maine-et-Loire","Manche","Marne","Haute-Marne","Mayenne","Meurthe-et-Moselle","Meuse","Morbihan","Moselle","Ni\xe8vre","Nord","Oise","Orne","Pas-de-Calais","Puy-de-D\xf4me","Pyr\xe9n\xe9es-Atlantiques","Hautes-Pyr\xe9n\xe9es","Pyr\xe9n\xe9es-Orientales","Bas-Rhin","Haut-Rhin","Rh\xf4ne","Haute-Sa\xf4ne","Sa\xf4ne-et-Loire","Sarthe","Savoie","Haute-Savoie","Paris","Seine-Maritime","Seine-et-Marne","Yvelines","Deux-S\xe8vres","Somme","Tarn","Tarn-et-Garonne","Var","Vaucluse","Vend\xe9e","Vienne","Haute-Vienne","Vosges","Yonne","Territoire de Belfort","Essonne","Hauts-de-Seine","Seine-St-Denis","Val-de-Marne","Val-D'Oise","Guadeloupe","Martinique","Guyane","La R\xe9union"].map((function(e){return c.a.createElement("option",{key:e,value:e},e)})))),c.a.createElement(_,{handleSearch:this.search,type:"\xe9tablissement"}),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Code \xe9tablissement"),c.a.createElement("th",{scope:"col"},"Type"),c.a.createElement("th",{scope:"col"},"Nom"),c.a.createElement("th",{scope:"col"},"Groupe"),c.a.createElement("th",{scope:"col"},"CP"),c.a.createElement("th",{scope:"col"},"Ville"),c.a.createElement("th",{scope:"col"},"D\xe9partement"),c.a.createElement("th",{scope:"col"},"Editer"),c.a.createElement("th",{scope:"col"},"Supprimer"))),c.a.createElement("tbody",null,t.map((function(t){return c.a.createElement("tr",{key:t._id},c.a.createElement("td",{scope:"row","data-label":"Code"},t.code),c.a.createElement("td",{"data-label":"Type"},t.type),c.a.createElement("td",{"data-label":"Nom"},t.name),c.a.createElement("td",{"data-label":"Groupe"},t.groupe),c.a.createElement("td",{"data-label":"Code postale"},t.postal_code),c.a.createElement("td",{"data-label":"Ville"},t.city),c.a.createElement("td",{"data-label":"D\xe9partement"},t.departement),c.a.createElement("td",{"data-label":"Editer"},c.a.createElement(o.b,{to:"/institutions/".concat(t._id,"/edit")},c.a.createElement("i",{className:"fas fa-edit"}))),c.a.createElement("td",{"data-label":"Supprimer"},c.a.createElement(o.b,{to:e.props,onClick:function(){return e.deleteOne(t._id)}},c.a.createElement("i",{className:"fas fa-backspace"}))))})))))}}]),a}(n.Component),ue=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={code:"",type:"",name:"",groupe:"",postal_code:"",city:"",departement:""},e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(V.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault(),"edit"===e.props.action?e.updateInstitution():e.createInstitution()},e.updateInstitution=function(){N("/api/institutions/"+e.props.id,e.state).then((function(t){e.props.history.push("/institutions")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;"edit"===this.props.action&&y("/api/institutions/",this.props.id).then((function(t){var a=t.data;e.setState({code:a.code,type:a.type,name:a.name,groupe:a.groupe,postal_code:a.postal_code,city:a.city,departement:a.departement})})).catch((function(e){console.log(e)}))}},{key:"createInstitution",value:function(){var e=this;C("/api/institutions",this.state).then((function(t){e.props.history.push("/institutions")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"ItemForm-container"},c.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},c.a.createElement("h2",{className:"title"},"edit"===this.props.action?"Modifier":"Ajouter"," un \xe9tablissement"),c.a.createElement("div",{className:"form-groups"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"code"},"Code \xe9tablissement :\xa0"),c.a.createElement("input",{id:"code",className:"input",type:"text",name:"code",value:this.state.code,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"type"},"Type d'\xe9tablissement :\xa0"),c.a.createElement("select",{id:"type",value:this.state.type,name:"type",onChange:this.handleChange},c.a.createElement("option",{value:"EHPAD"},"EHPAD"),c.a.createElement("option",{value:"R\xe9sidence"},"R\xe9sidence"),c.a.createElement("option",{value:"SAD"},"SAD"))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"name"},"Nom de l'\xe9tablissement :\xa0"),c.a.createElement("input",{id:"name",className:"input",type:"text",name:"name",value:this.state.name,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"groupe"},"Groupe :\xa0"),c.a.createElement("input",{id:"groupe",className:"input",type:"text",name:"groupe",value:this.state.groupe,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"postal_code"},"Code postal :\xa0"),c.a.createElement("input",{id:"postal_code",className:"input",type:"text",name:"postal_code",value:this.state.postal_code,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"city"},"Ville :\xa0"),c.a.createElement("input",{id:"city",className:"input",type:"text",name:"city",value:this.state.city,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"label",htmlFor:"departement"},"D\xe9partement :\xa0"),c.a.createElement("select",{id:"departement",value:this.state.departement,name:"departement",onChange:this.handleChange},["Ain","Aisne","Allier","Alpes-de-Haute-Provence","Hautes-Alpes","Alpes-Maritimes","Ard\xe8che","Ardennes","Ari\xe8ge","Aube","Aude","Aveyron","Bouches-du-Rh\xf4ne","Calvados","Cantal","Charente","Charente-Maritime","Cher","Corr\xe8ze","Corse","C\xf4te-d'Or","C\xf4tes-d'Armor","Creuse","Dordogne","Gironde","Doubs","Dr\xf4me","Eure","Eure-et-Loir","Finist\xe8re","Gard","Haute-Garonne","Gers","H\xe9rault","Ille-et-Vilaine","Indre","Indre-et-Loire","Is\xe8re","Jura","Landes","Loir-et-Cher","Loire","Haute-Loire","Loire-Atlantique","Loiret","Lot","Lot-et-Garonne","Loz\xe8re","Maine-et-Loire","Manche","Marne","Haute-Marne","Mayenne","Meurthe-et-Moselle","Meuse","Morbihan","Moselle","Ni\xe8vre","Nord","Oise","Orne","Pas-de-Calais","Puy-de-D\xf4me","Pyr\xe9n\xe9es-Atlantiques","Hautes-Pyr\xe9n\xe9es","Pyr\xe9n\xe9es-Orientales","Bas-Rhin","Haut-Rhin","Rh\xf4ne","Haute-Sa\xf4ne","Sa\xf4ne-et-Loire","Sarthe","Savoie","Haute-Savoie","Paris","Seine-Maritime","Seine-et-Marne","Yvelines","Deux-S\xe8vres","Somme","Tarn","Tarn-et-Garonne","Var","Vaucluse","Vend\xe9e","Vienne","Haute-Vienne","Vosges","Yonne","Territoire de Belfort","Essonne","Hauts-de-Seine","Seine-St-Denis","Val-de-Marne","Val-D'Oise","Guadeloupe","Martinique","Guyane","La R\xe9union"].map((function(e){return c.a.createElement("option",{key:e,value:e},e)}))))),c.a.createElement("button",{style:{marginTop:"40px"},className:"btn red"},"edit"===this.props.action?"Modifier":"Ajouter"))))}}]),a}(n.Component),me=Object(k.g)(ue);var pe=function(){return c.a.createElement("div",null,c.a.createElement(me,null))};var de=function(e){return c.a.createElement("div",null,c.a.createElement(me,{action:"edit",id:e.match.params.id}))};var he=function(){return c.a.createElement("div",null)};var fe=function(){return c.a.createElement("div",null)},Ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={users:[],searchUsers:[]},e.search=function(t){var a=Object(I.a)(e.state.users).filter((function(e){return e.email.toLowerCase().includes(t.search.toLowerCase())}));e.setState({searchUsers:a})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g("/api/users").then((function(t){e.setState({users:t.data,searchUsers:t.data})})).catch((function(e){console.log(e)}))}},{key:"deleteOne",value:function(e){var t=this;O("/api/users/",e).then((function(e){return t.componentDidMount()})).catch((function(e){return console.log(e)}))}},{key:"upgrade",value:function(e){var t=this;N("/api/users/"+e,{isMob:!0}).then((function(e){return t.componentDidMount()})).catch((function(e){return console.log(e)}))}},{key:"downgrade",value:function(e){var t=this;N("/api/users/"+e,{isMob:!1}).then((function(e){return t.componentDidMount()})).catch((function(e){return console.log(e)}))}},{key:"formatDate",value:function(e){var t=e.split("T")[0].split("-");return"".concat(t[2],"-").concat(t[1],"-").concat(t[0])}},{key:"render",value:function(){var e,t=this,a=[],n=[],l=Object(M.a)(this.state.searchUsers.entries());try{for(l.s();!(e=l.n()).done;){var r=Object(A.a)(e.value,2),s=(r[0],r[1]);!0===s.isMob?a.push(s):n.push(s)}}catch(i){l.e(i)}finally{l.f()}return c.a.createElement("div",{className:"page"},c.a.createElement("h1",null,"Les b\xe9n\xe9voles"),c.a.createElement("div",{className:"users-list"},c.a.createElement("div",{className:"users-mobs"},c.a.createElement("h3",{style:{marginBottom:"10px",color:"#e36164"}},a.length," mob",a.length>1?"s":""),c.a.createElement(_,{handleSearch:this.search,type:"b\xe9n\xe9vole"}),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Email"),c.a.createElement("th",{scope:"col"},"Membre depuis"),c.a.createElement("th",{scope:"col"},"Retirer mob"),c.a.createElement("th",{scope:"col"},"Supprimer"))),c.a.createElement("tbody",null,a.map((function(e){return c.a.createElement("tr",{key:e._id},c.a.createElement("td",{scope:"row","data-label":"Email"},e.email),c.a.createElement("td",{"data-label":"Depuis"},t.formatDate(e.created)),c.a.createElement("td",{"data-label":"Retirer mob"},c.a.createElement(o.b,{to:t.props,onClick:function(){return t.downgrade(e._id)}},c.a.createElement("i",{className:"fas fa-user-times"}))),c.a.createElement("td",{"data-label":"Supprimer"},c.a.createElement(o.b,{to:t.props,onClick:function(){return t.deleteOne(e._id)}},c.a.createElement("i",{className:"fas fa-backspace"}))))}))))),c.a.createElement("div",{className:"users-volunteers"},c.a.createElement("h3",{style:{marginBottom:"10px",color:"#e36164"}},n.length," participant\xb7e",n.length>1?"\xb7s":""),c.a.createElement(_,{handleSearch:this.search,type:"b\xe9n\xe9vole"}),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Email"),c.a.createElement("th",{scope:"col"},"Membre depuis"),c.a.createElement("th",{scope:"col"},"Nommer mob"),c.a.createElement("th",{scope:"col"},"Supprimer"))),c.a.createElement("tbody",null,n.map((function(e){return c.a.createElement("tr",{key:e._id},c.a.createElement("td",{scope:"row","data-label":"Email"},e.email),c.a.createElement("td",{"data-label":"Depuis"},t.formatDate(e.created)),c.a.createElement("td",{"data-label":"Nommer mob"},c.a.createElement(o.b,{to:t.props,onClick:function(){return t.upgrade(e._id)}},c.a.createElement("i",{className:"fas fa-user-plus"}))),c.a.createElement("td",{"data-label":"Supprimer"},c.a.createElement(o.b,{to:t.props,onClick:function(){return t.deleteOne(e._id)}},c.a.createElement("i",{className:"fas fa-backspace"}))))})))))))}}]),a}(n.Component);var ve=function(){return c.a.createElement("div",null)};var be=function(){return c.a.createElement("div",null)};var ge=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(D,null),c.a.createElement(k.d,null,c.a.createElement($,{exact:!0,path:"/",component:U}),c.a.createElement(k.b,{exact:!0,path:"/signin",component:R}),c.a.createElement(k.b,{exact:!0,path:"/signup",component:z}),c.a.createElement($,{exact:!0,path:"/profile",component:W}),c.a.createElement($,{exact:!0,path:"/contacts",component:X}),c.a.createElement(Y,{exact:!0,path:"/contacts/create",component:te}),c.a.createElement(Y,{exact:!0,path:"/contacts/:id/edit",component:ae}),c.a.createElement($,{exact:!0,path:"/contacts/:id",component:se}),c.a.createElement(Y,{exact:!0,path:"/institutions",component:ie}),c.a.createElement(Y,{exact:!0,path:"/institutions/create",component:pe}),c.a.createElement(Y,{exact:!0,path:"/institutions/:id/edit",component:de}),c.a.createElement(Y,{exact:!0,path:"/institutions/:id",component:he}),c.a.createElement($,{exact:!0,path:"/calls",component:fe}),c.a.createElement($,{exact:!0,path:"/calls/create",component:le}),c.a.createElement($,{exact:!0,path:"/calls/:id/edit",component:re}),c.a.createElement(Y,{exact:!0,path:"/users",component:Ee}),c.a.createElement(Y,{exact:!0,path:"/users/create",component:ve}),c.a.createElement(Y,{exact:!0,path:"/users/:id/edit",component:be})))};a(65),a(66);r.a.render(c.a.createElement(o.a,null,c.a.createElement(S,null,c.a.createElement(ge,null))),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.1520d3ec.chunk.js.map